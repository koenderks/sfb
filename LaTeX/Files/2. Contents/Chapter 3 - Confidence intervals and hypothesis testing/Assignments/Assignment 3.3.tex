\setcounter{section}{3}
\setcounter{subsection}{3}
\setcounter{question}{0}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Assignment 3.3: Calculating the confidence interval for the mean and
% testing for normality
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\rassignment{Calculating a confidence interval and
testing for normality}

For this assignment, you will need the \dataset{populations.csv} data file, which contains four different \concept{populations} of 10,000 observations called \rcode{P1 - P4}. \\

\question{
    Use the \rcode{read.csv()} function (and \rcode{setwd()} function if you prefer) to import the data set into an object named \rcode{dataset5}.
}

\rcodeanswertiny

\question{
    Run the following code in \texttt{R} and explain what it does. Why do you have to use a seed?
}

\codeblock{set.seed(54321) {\color{dataset} \# You can replace 54321 with your own seed number} \\
\\
sample1 <- sample(dataset5\$P1, size = 90)\\
sample2 <- sample(dataset5\$P2, size = 90)\\
sample3 <- sample(dataset5\$P3, size = 90)\\
sample4 <- sample(dataset5\$P4, size = 90)
}

\hint{Use Râ€™s help function (the \rcode{?} symbol) to find out more information about the \rcode{sample()} and \rcode{set.seed()} functions.}

\twolineanswerbox

\question{
    Calculate the \concept{mean} and \concept{standard deviation} for each \concept{sample} and save them into variables \rcode{x1} - \rcode{x4} and \rcode{s1} - \rcode{s4}. Use these results to also calculate the \concept{standard errors} and same them into variables \rcode{se1} - \rcode{se4}.
}

\rcodeanswermedium

\clearpage % Page break

\emptyanswerbox{
    Standard error sample 1: \shortanswerline
    \answerskip
    Standard error sample 2: \shortanswerline
    \answerskip
    Standard error sample 3: \shortanswerline
    \answerskip
    Standard error sample 4: \shortanswerline
}

The \texttt{R} function \rcode{qnorm(p, mean, sd)} returns the \concept{z-value} for \concept{quantile} \rcode{p} from a \concept{normal distribution} with a certain \concept{mean} $\mu$ (\rcode{mean}) and \concept{standard deviation} $\sigma$ (\rcode{sd}). If you do not specify a mean or standard deviation for the function it will assume the standard normal distribution $N(\mu = 0,\, \sigma = 1)$. \\

\question{
    Run the following code in \texttt{R} and explain the value that you see. 
}

\codeblock{qnorm(p = 0.95)}

\twolineanswerbox

The \rcode{qnorm()} function cannot return the \concept{z-value} for the two-sided \concept{confidence interval}, but you can work around that by realizing that in a two-sided interval you have to split the risk over both sides of the standard normal distribution. \\

\question{
    Run the following code in \texttt{R} and explain why you can use the value in \rcode{z} for a two-sided 95\% \concept{confidence interval}. 
}

\codeblock{z <- qnorm(p = 0.975)}

\twolineanswerbox

\question{
    Calculate the 95\% \concept{confidence interval} for each sample. Store the lower bounds \rcode{lb1} - \rcode{lb4} and store the upper bounds in \rcode{ub1} - \rcode{ub4}.
}

\clearpage % Page break

\rcodeanswermedium

This is a rare case in which you actually have the full \concept{populations}, so you can check if the estimates based on your \concept{samples} are actually close to the real value in the populations. \\

\question{
    Calculate the actual \concept{population means}, call them \rcode{mu1} - \rcode{mu4}. Next, fill the schema below with all known values for \rcode{ub}, \rcode{x}, \rcode{lb}, and \rcode{mu}. 
}

\rcodeanswermedium

\emptyanswerbox{
    \vspace*{-10pt}
    \begin{center}
    \begin{tabular}{r|c|c|c|c|}
    \multicolumn{1}{c}{} & \multicolumn{1}{c}{\rcode{sample1}} & \multicolumn{1}{c}{\rcode{sample2}} & \multicolumn{1}{c}{\rcode{sample3}} & \multicolumn{1}{c}{\rcode{sample4}} \tstrut\bstrut\\
    \cline{2-5}
    \rcode{ub} & & & & \tstrut\bstrut\\
    \cline{2-5}
    \rcode{x} & & & & \tstrut\bstrut\\
    \cline{2-5}
    \rcode{lb} & & & & \tstrut\bstrut\\
    \cline{2-5}
    \end{tabular}
    \end{center}
    
    \begin{center}
    \begin{tabular}{r|c|c|c|c|}
    \multicolumn{1}{c}{} & \multicolumn{1}{c}{\rcode{P1}} & \multicolumn{1}{c}{\rcode{P2}} & \multicolumn{1}{c}{\rcode{P3}} & \multicolumn{1}{c}{\rcode{P4}} \tstrut\bstrut\\
    \cline{2-5}
    \rcode{mu} & & & & \tstrut\bstrut\\
    \cline{2-5}
    \textit{mu in interval?} & YES / NO & YES / NO & YES / NO & YES / NO \tstrut\bstrut\\
    \cline{2-5}
    \end{tabular}
    \end{center}
}

\question{
    Are all \concept{population means} inside the interval you calculated?
}

\emptyanswerbox{
    \vspace*{-15pt}
    \begin{center}
        YES / NO
    \end{center}
}

\question{
    How often do you expect this to happen given the confidence level (95\%) used?
}

\onelineanswerbox

\clearpage % Page break